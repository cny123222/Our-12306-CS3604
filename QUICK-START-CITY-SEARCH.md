# 城市搜索功能 - 快速开始

## 🚀 5分钟快速测试

### 1. 启动服务（2分钟）

打开两个终端窗口：

**终端1 - 后端**:
```bash
cd backend
npm run dev
```
等待看到 "Server running on port 3000"

**终端2 - 前端**:
```bash
cd frontend
npm run dev
```
等待看到 "Local: http://localhost:5173"

### 2. 测试搜索（3分钟）

#### 步骤1: 打开首页
- 浏览器访问: http://localhost:5173
- 你应该看到12306首页

#### 步骤2: 测试城市搜索
1. 点击"出发城市"输入框
2. **验证✓**: 下拉列表只显示"上海"和"北京"
3. 选择"上海"
4. 点击"到达城市"输入框
5. 选择"北京"
6. 点击"查询"按钮

#### 步骤3: 查看结果
在车次列表页：
- **验证✓**: 车次列表显示从上海到北京的所有车次
- **验证✓**: 每个车次显示具体车站名（如"上海虹桥 → 北京南"）
- **验证✓**: 筛选面板"出发车站"显示：上海虹桥、上海、上海松江、上海南
- **验证✓**: 筛选面板"到达车站"显示：北京南、北京丰台、北京

#### 步骤4: 测试筛选
1. 勾选"出发车站"中的"上海虹桥"
2. **验证✓**: 车次列表立即只显示从上海虹桥出发的车次

## ✅ 成功标志

如果你看到：
- 搜索框只显示城市名（不是车站名）
- 车次列表显示准确车站名
- 筛选面板显示所有车站
- 勾选后立即筛选

**恭喜！功能正常工作！** 🎉

## ❌ 常见问题

### 问题: 搜索框仍显示车站名
**解决**: 
```bash
# 停止前端服务 (Ctrl+C)
# 清除浏览器缓存 (Ctrl+Shift+Delete)
# 重启前端
cd frontend && npm run dev
```

### 问题: 后端报错
**解决**:
```bash
# 停止后端服务 (Ctrl+C)
# 重启后端
cd backend && npm run dev
```

### 问题: 找不到城市
**检查**: 
```bash
# 测试API
curl http://localhost:3000/api/trains/cities
# 应该返回: {"cities":["上海","北京"]}
```

## 📚 更多信息

- 详细测试: `CITY-SEARCH-TEST-GUIDE.md`
- 实施详情: `CITY-BASED-SEARCH-IMPLEMENTATION.md`
- 总结文档: `IMPLEMENTATION-SUMMARY.md`

## 🆕 添加新城市

编辑 `backend/src/config/cityStationMapping.js`:

```javascript
const CITY_STATION_MAPPING = {
  '上海': ['上海虹桥', '上海', '上海松江', '上海南'],
  '北京': ['北京南', '北京丰台', '北京'],
  '深圳': ['深圳北', '深圳', '深圳东'],  // ← 添加这行
};
```

重启后端服务即可！

