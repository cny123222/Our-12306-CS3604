5. 用户购票
    5.1 购票页面布局与初始状态
        Scenario: 页面加载后正确显示信息
            Given：用户已登录并跳转到**购票页面**
            When：页面加载完成
            Then：页面顶部显示车次、出发/到达时间、出发/到达站等信息
            And：页面显示一个“乘车人”区域，包含用户在个人中心预存的乘车人列表（如“刘蕊蕊”、“王欣”）
            And：页面显示一个购票信息区域，包含“姓名”、“证件类型”、“证件号码”、“席别”等字段，可以选择乘车人并为每个乘车人添加购票信息，购票信息区域内有一条序号为1的购票信息行，“席别”下拉框自动选择车次对应的默认值（如G字头车次默认二等座），“证件类型”默认“居民身份证”，其他字段为空
            And：页面下方有“提交订单”按钮
            And：页面下方有“上一步”按钮。  <todo:点击上一步按钮会重新回到车票查询页面>
    
    5.2 “席别”默认设置
        Scenario: 用户为G字头城际列车购票
            Given：用户选择了G字头车次进行购票
            When：系统加载购票页面
            Then：页面购票信息区域的“席位”下拉框自动选择“二等座(¥80元)”

        Scenario: 用户为C字头城际列车购票
            Given：用户选择了C字头车次进行购票
            When：系统加载购票页面
            Then：页面购票信息区域的“席位”下拉框自动选择“二等座(¥47元)”

        Scenario: 用户选择D字头车次进行购票
            Given：用户选择了D字头车次进行购票
            When：系统加载购票页面
            Then：页面购票信息区域的“席位”下拉框自动选择“二等座(¥28元)”
        
        Scenario: 用户选择D字头车次进行购票
            Given：用户选择了D字头车次进行购票
            When：系统加载购票页面
            Then：页面购票信息区域的“席位”下拉框自动选择“二等座(¥28元)”
        
    5.2 用户选择乘车人
        Scenario: 用户从列表中勾选一名乘车人
            Given：用户在**购票页面**
            When：用户勾选某个乘车人前的复选框（如用户选择乘车人“王三”）
            Then：系统自动为该乘车人添加一个信息行
            And：该行的“姓名”显示为乘车人姓名（如，王三）
            And：“证件类型”自动填充为该乘车人在数据库中保存的类型（如“居民身份证”）且不可修改
            And：“证件号码”自动填充为该乘车人在数据库中保存的号码（如“3301************028”）且不可修改

        Scenario: 用户尝试手动输入乘车人姓名
            Given：用户在**购票页面**
            When：用户点击“姓名”输入框并尝试输入文字
            Then：系统不响应任何输入，输入框内容无变化

        Scenario: 用户取消勾选已选乘车人
            Given：用户已勾选某个乘车人（如“刘蕊蕊”）
            When：用户再次点击该乘车人前的复选框，取消勾选
            Then：系统移除为该乘车人添加的乘车人信息行，其他乘车人信息行内容保持不变，序号自动做出调整

    5.3 用户选择席位
        Scenario: 用户展开席位下拉菜单
            Given：用户在**购票页面**，并已为乘车人“刘蕊蕊”添加信息行
            When：用户点击该行的“席别”下拉菜单
            Then：下拉菜单中仅显示当前有票的席位及其价格（如“硬卧(¥74.5元)”、“硬座(¥23.5元)”）
            And：已售罄的席位不会出现在选项中

        Scenario: 用户更改席位选择
            Given：系统已为乘车人默认选择席别
            When：用户从“席别”下拉菜单中选择其他席别
            Then：该乘车人的席位变更为用户选择的席别，票价信息随之更新

    5.4 用户提交订单
        Scenario: 用户未选择任何乘车人点击“提交订单”
            Given：用户在**购票页面**，未勾选任何乘车人
            When：用户点击“提交订单”按钮
            Then：系统弹出提示“请选择乘车人！”
            And：弹窗有“确认”按钮，点击可关闭弹窗，页面回到**购票页面**
        
        Scenario：用户提交订单时车票售罄
            Given：用户在**购票页面**，并已勾选至少一名乘车人
            And：用户网络正常
            When：用户点击“提交订单”按钮
            And：系统在确认车票时发现该车次该席别车票已经售罄或者该席别车票余票数小于用户订单需求数量（可能因为其他用户在其他窗口或页面上购买了该席别车票）
            Then：系统弹出提示“手慢了，该车次席别车票已售罄！”
            And：弹窗有“确认”按钮，点击可关闭弹窗，页面回到**车票查询界面**

        Scenario: 用户选择乘车人后成功提交订单
            Given：用户在**购票页面**，并已勾选至少一名乘车人
            And：用户网络正常
            When：用户点击“提交订单”按钮
            And：系统确认用户选择的乘车人信息和席位，，车票未售罄且可以满足用户提交订单的需求数量
            Then：页面在100ms之内跳转到**订单确认及支付页面**
        
        Senario：用户提交订单时网络异常
            Given：用户在**购票页面**，并已勾选至少一名乘车人
            And：用户网络异常
            When：用户点击“提交订单”按钮
            Then：页面弹出提示：网络忙，请稍后再试。
            And：弹窗有“确认”按钮，点击可关闭提示弹窗，回到**购票页面**