< 车票状态仅支持有票，无票，余票20张以内，不支持候补车票>
4. 车票查询与筛选
    
    4.1 车票查询页面布局
        4.1.1 整体页面布局：背景为white（白色），从上到下分为5个部分，从上到下依次为**页面顶部导航区域**，**车次搜索和查询区域**，**车次信息筛选区域**，**车次列表区域**和**底部导航区域**，内容区域最大宽度1200px，内边距20px
        
        4.1.2 顶部导航区域：
            - **Logo 区域**：页面左上角为Logo区域（直接使用图片"登录页-顶部导航区域-Logo区域.png"），左侧为中国铁路12306官方Logo，logo右侧上方为黑色"中国铁路12306"、下方为灰色"12306 CHINA RAILWAY"，点击logo可跳转到12306首页
            - **欢迎信息**：Logo区域右侧为欢迎信息区域，显示黑色"欢迎登录12306"
        
        4.1.3 **车次搜索和查询区域**（TrainSearchBar）
            4.1.3.1 **整体样式**：背景为#eff1f9（浅蓝色），边框为#bbd7ee（浅蓝色边框），圆角4px，内边距16px，下边距16px，阴影0 1px 3px rgba(0, 0, 0, 0.05)
            4.1.3.2 **单程/往返选择器**：单选框尺寸16px×16px，选中颜色#2196f3（蓝色），标签字体大小14px，颜色#000000（黑色）
            4.1.3.3 **搜索输入框**：横向布局，标签字体大小13px，颜色#000000（黑色），输入框宽度120px，高度30px，内边距6px 10px，边框为#d0d5e8（浅灰色），圆角3px，字体大小13px，文字颜色#333333（深灰色），占位符颜色#bbb（浅灰色），focus时边框为#5ba3e0（蓝色），带有阴影效果rgba(91, 163, 224, 0.1)
            4.1.3.4 **交换按钮**：尺寸30px×30px，背景#eff1f9（浅蓝色），颜色#5ba3e0（蓝色），圆角3px，图标尺寸20px×20px，hover时背景#f0f7ff（浅蓝色），带有阴影效果
            4.1.3.5 **查询按钮**：内边距6px 30px，高度30px，背景#ff8001（橙色），文字white（白色），圆角3px，字体大小14px，字体加粗（font-weight: 500），hover时背景#f7920a（浅橙色），禁用时背景#cccccc（灰色）
            4.1.3.6 **错误提示**：文字颜色#d32f2f（红色），字体大小13px，内边距8px 20px，背景#ffebee（浅红色），圆角4px，上边距10px

        4.1.4 **车次信息筛选区域**（TrainFilterPanel）
            4.1.4.1 **整体样式**：背景white（白色），边框为#e0e0e0（浅灰色），圆角4px，下边距20px，阴影0 2px 4px rgba(0, 0, 0, 0.06)
            4.1.4.2 **日期筛选标签行**：背景渐变色（从#f9f9f9到#e7e7e7），边框为#d0d0d0（浅灰色），底部边框为#569ecf（蓝色），内边距8px 16px，字体大小13px，颜色#333333（深灰色），字体加粗（font-weight: 500），选中时背景white（白色），颜色#499bd5（蓝色），字体加粗（font-weight: 1000），边框为#569ecf（蓝色）
            4.1.4.3 **筛选条件面板**：内边距16px 20px，边框为#569ecf（蓝色），背景white（白色）
            4.1.4.4 **筛选标签**：字体大小14px，字体加粗（font-weight: 800），颜色#000000（黑色）
            4.1.4.5 **"全部"按钮**：内边距0px 8px，高度25px，背景#8ea7d4（蓝色），文字white（白色），圆角3px，字体大小12px，边框为#8ea7d4（蓝色），hover时背景#7a95c5（深蓝色）
            4.1.4.6 **筛选复选框**：复选框尺寸14px×14px，边框为#8fc0e5（浅蓝色），选中时背景#8fc0e5（浅蓝色），勾选标记为白色"✓"（字体大小12px，字体加粗），标签字体大小13px，颜色#000000（黑色），最小宽度110px
            4.1.4.7 **发车时间选择**：下拉框高度28px，内边距4px 10px，边框为#d0d0d0（浅灰色），圆角3px，字体大小13px，颜色#000000（黑色），hover时边框为#2196f3（蓝色），focus时边框为#2196f3（蓝色），带有阴影效果rgba(33, 150, 243, 0.1)
            4.1.4.8 **清除筛选按钮**：内边距6px 24px，背景#ff7f02（橙色），文字white（白色），字体大小13px，字体加粗（font-weight: 500），hover时背景渐变色（从#ffaa44到#ff8822）
            4.1.4.9 用户可以根据车次类型（"GC-高铁/城际"，"D-动车"），出发车站，到达车站，车次席别（"商务座"、"一等座"、"二等座"、"软卧"、"硬卧"）筛选符合条件的车次
            4.1.4.10 查询结果
                4.1.4.10.1 如果查询到符合条件的车次，车次列表会展示在**车次列表区域**中
                4.1.4.10.2 如果没有查询到符合条件的车次，**车次列表区域**为空白并出现提示"暂无符合条件的车次"，内边距60px 20px，文字颜色#999999（灰色），图标字体大小48px，文字字体大小16px，颜色#666666（深灰色）

        4.1.5 **车次列表区域**（TrainList）
            4.1.5.1 **整体样式**：背景white（白色），边框为#e0e0e0（浅灰色），圆角4px，阴影0 2px 4px rgba（0, 0, 0, 0.06）
            4.1.5.2 **查询结果提示信息**：内边距12px 16px，背景white（白色），底部边框为#e0e0e0（浅灰色），字体大小13px，颜色#333333（深灰色），路线信息字体加粗（font-weight: 600），日期和数量颜色#000000（黑色），数量字体加粗（font-weight: 600），换乘提示颜色#333333（深灰色），换乘高亮颜色#ff7700（橙色），字体加粗（font-weight: 500）
            4.1.5.3 **列表表头**：网格布局，列宽分别为80px、100px、80px、70px、11列自适应（最小50px）、80px，背景渐变色（从#3699d6到#187ac1），底部边框为#3466a0（深蓝色），字体大小13px，字体加粗（font-weight: 600），文字颜色white（白色），内边距4px 3px，最小高度32px，单元格右边框为#2270a4（深蓝色），可排序列hover时背景rgba(255, 255, 255, 0.1)（半透明白色），排序图标颜色#ffd700（金色）
            4.1.5.4 **车次列表项**：网格布局，列宽与表头一致，偶数行背景#eff1f9（浅蓝色），奇数行背景white（白色），底部边框为#e9ecef（浅灰色），hover时阴影0 1px 4px rgba(0, 0, 0, 0.08）
            4.1.5.5 **车次单元格**：字体大小13px，颜色#495057（深灰色），内边距根据列位置不同（前3列和历时列为8px，其他列为4px），从历时右边开始的列添加浅蓝色竖线分隔（颜色#c8ddf0）
            4.1.5.6 **车次号**：字体大小16px，字体加粗（font-weight: 800），颜色#333333（深灰色），带下划线（颜色#333333）
            4.1.5.7 **站点信息**：出发站标签背景#cf9840（棕色），到达站标签背景#3f6901（绿色），标签尺寸18px×18px，圆角2px，文字颜色white（白色），字体大小11px，字体加粗（font-weight: 600），站点名称字体大小14px，字体加粗（font-weight: 600），颜色#333333（深灰色）
            4.1.5.8 **时间信息**：出发时间字体大小16px，字体加粗（font-weight: 800），颜色#333333（深灰色），到达时间字体大小16px，字体加粗（font-weight: 800），颜色#999999（灰色），到达日期标签字体大小13px，颜色#5c5c5c（深灰色），字体加粗（font-weight: 500）
            4.1.5.9 **历时**：字体大小15px，颜色#343434（深灰色），字体加粗（font-weight: 800）
            4.1.5.10 **座位信息**：字体大小13px，字体加粗（font-weight: 500），内边距2px 0
                - **有票**（余票≥20张）：显示"有"，颜色#52c41a（绿色），字体加粗（font-weight: 600）
                - **余票少**（余票<20张）：显示具体数字，颜色#000000（黑色），字体加粗（font-weight: 800）
                - **无票**（余票=0张）：显示"无"，颜色#999999（灰色）
                - **无此席别**：显示"--"，颜色#999999（灰色）
            4.1.5.11 **预订按钮**：位于每行最右侧，宽度80px，背景#ff8001（橙色），文字white（白色），字体大小14px，hover时背景#ff8533（浅橙色），禁用时背景#cccccc（灰色），当所有席别均为"无"时，按钮显示为灰色且不可点击
            4.1.5.12 查询结果以"车次列表"形式展示，表格中的项包含车次、出发站/到达站、出发时间、到达时间、历时、商务座/特等座、优选/一等座、一等座、二等座/二等包座、高级/软卧、软卧/动卧/一等卧、硬卧/二等卧、软座、硬座、无座、备注等信息
            4.1.5.13 车次列表不包含换乘车次，仅展示符合查询条件和筛选条件的直达车次
        
        4.1.6 **底部导航区域**
            4.1.6.1 与首页保持一致
            4.1.6.2 **底部导航**：左侧为友情链接，右侧为四个官方平台的二维码，分别为"中国铁路官方微信"（直接使用图片二维码"中国铁路官方微信二维码.png"）、"中国铁路官方微博"（直接使用图片二维码"中国铁路官方微博二维码.png"）、"12306 公众号"（直接使用图片二维码"12306公众号二维码.png"）、"铁路 12306"（直接使用图片二维码"铁路12306二维码.png"）

        
    4.2 **车票查询页面**的进入
        
        4.2.1 首页通过点击“车票”快捷页面入口进入车票查询页面，采用默认的搜索栏内容
            Scenario：用户在**首页**中点击“车票”快捷页面入口成功加载**车票查询页面**
                Given：用户在**首页**通过点击“车票”快捷页面入口
                When：**车票查询页面**成功加载
                Then：**车票查询页面**的**车次列表区域**为空，且**车次搜索和查询区域**搜索框中均为默认状态。
                And：**车票查询页面**的**车次信息筛选区域**筛选栏中所有选项均为默认状态，即未被勾选。
        
        4.2.2 用户在**首页/查询页**中输入出发站、到达站、出发日期信息后，点击“查询”按钮，即可跳转到**车票查询页面**，**车票查询页面**的**车次列表区域**会展示符合条件的车次列表，并且自动将用户输入的出发站、到达站、出发日期填充到**车次搜索和查询区域**的搜索框中。
            Scenario：用户在**首页/查询页**中输入出发站、到达站、出发日期信息后，点击“查询”按钮且成功跳转到**车票查询页面**
                Given：用户在**首页/查询页**中输入出发站、到达站、出发日期信息
                When：用户点击“查询”按钮
                Then：跳转到**车票查询页面**，**车票查询页面**的**车次列表区域**会展示符合条件的车次列表，并且自动将用户输入的出发站、到达站、出发日期填充到搜索框中。

            Scenario：用户在**首页/查询页**中勾选了“GC-高铁/城际”选项
                Given：用户在**首页/查询页**中输入出发站、到达站、出发日期信息后，点击“查询”按钮，即可跳转到**车票查询页面**
                And：用户在**首页/查询页**中勾选了“GC-高铁/城际”选项
                When: 车票查询页面成功加载
                Then：**车票查询页面**会自动勾选**车次信息筛选区域**筛选框中的““GC-高铁/城际””和“D-动车“选项
                And：**车次列表区域**仅展示符合条件的高铁和动车车次

    4.3 用户查询车次信息
        4.3.1 用户未输入出发地或到达地或出发日期时，系统自动填充默认值
            Scenario：用户在**车次搜索和查询区域**未输入出发地
                Given：用户在**车票查询页面**
                When：用户未在**车次搜索和查询区域**的搜索栏中输入**出发地**或还未进行输入出发地操作
                Then：系统在“出发地”输入框填入默认状态，即“请选择城市”

            Scenario：用户未输入到达地
                Given：用户在**车票查询页面**
                When: 用户未在**车次搜索和查询区域**的搜索栏中输入**到达地**或还未进行输入到达地操作
                Then：系统在“到达地”输入框填入默认状态，即“请选择城市”
            
            Scenario：用户未输入出发日期
                Given：用户在**车票查询页面**
                When：用户未在**车次搜索和查询区域**的搜索栏中输入**出发日期**或还未进行输入出发日期操作
                Then：系统在“出发日期”输入框填入默认状态，即当前日期
        
        4.3.2 用户未输入出发地或到达地，点击"查询"按钮          
            Scenario：用户输入到达地未输入出发地，点击"查询"按钮
                Given：用户在**车票查询页面**，用户在**车次搜索和查询区域**的搜索栏中**未输入出发地**
                When：用户点击"查询"按钮
                Then："出发地"输入框下方出现错误提示"请选择出发城市"，文字颜色#d32f2f（红色），字体大小12px，绝对定位在输入框下方，上边距2px
                And："出发地"输入框边框变为#d32f2f（红色）
            
            Scenario：用户输入出发地未输入到达地，点击"查询"按钮
                Given：用户在**车票查询页面**，用户在**车次搜索和查询区域**的搜索栏中输入了出发地但**未输入到达地**
                When：用户点击"查询"按钮
                Then："到达地"输入框下方出现错误提示"请选择到达城市"，文字颜色#d32f2f（红色），字体大小12px，绝对定位在输入框下方，上边距2px
                And："到达地"输入框边框变为#d32f2f（红色）
        
        4.3.3 校验用户输入的出发地是否合法
            Scenario: 用户在输入的出发地不在**数据库**的城市列表中
                Given 用户在**车次搜索和查询区域**的**出发地输入框**中输入了一个不在**数据库**中的城市作为出发地
                When 用户在**车次搜索和查询区域**中点击**查询**
                Then 查询按钮上方出现系统提示"无法匹配该出发城市"，文字颜色#d32f2f（红色），字体大小13px，内边距8px 20px，背景#ffebee（浅红色），圆角4px，上边距10px
                And  系统在**出发地输入框**下拉条目中推荐具有一定相似度的**数据库**中的城市
                And  用户可以点击推荐城市，将其填充到出发地输入框中
        
        4.3.4 校验用户输入的到达地是否合法
            Scenario: 用户在输入的到达地不在**数据库**的城市列表中
                Given 用户在**车次搜索和查询区域**的**到达地输入框**中输入了一个不在**数据库**的城市作为到达地
                When 用户在**车次搜索和查询区域**中点击**查询**
                Then 查询按钮上方出现系统提示"无法匹配该到达城市"，文字颜色#d32f2f（红色），字体大小13px，内边距8px 20px，背景#ffebee（浅红色），圆角4px，上边距10px
                And  系统在**到达地输入框**下拉条目中推荐具有一定相似度的**数据库**中的城市
                And  用户可以点击推荐城市，将其填充到到达地输入框中
        
        4.3.5 合法出发地推荐
            Scenario: 用户未选择或已选择出发地
                Given 用户在**车票查询页面**
                When 用户在**车次搜索和查询区域**中点击**出发地输入框**
                Then 系统在**出发地输入框**下拉条目中显示**数据库**存储的所有站点
                And  用户可以点击推荐城市，将其填充到出发地输入框中

        4.3.6 合法到达地推荐
            Scenario: 用户未选择或已选择到达地
                Given 用户在**车票查询页面**
                When 用户在**车次搜索和查询区域**中点击**到达地输入框**
                Then 系统在**到达地输入框**下拉条目中显示**数据库**存储的所有站点
                And  用户可以点击推荐城市，将其填充到到达地输入框中

        4.3.7 合法出发日期推荐
            Scenario: 用户未选择或已选择出发日期
                Given 用户在**车票查询页面**
                When 用户在**车次搜索和查询区域**中点击**出发日期选择框**
                Then 系统在**出发日期选择框**下拉条目中显示日历，已放票的日期显示为黑色，不能选择已过期或未开票的日期显示为灰色
                And  用户如果点击**已放票**的日期，将其填充到出发日期选择框中
                And  用户如果点击**已过期或未放票**的日期，页面保持不变，无法将该日期填充到出发日期选择框内

        4.3.8 用户成功查询且系统响应
            Scenario: 用户输入了正确的出发地、到达地、出发日期且系统响应
                Given 用户在**车票查询页面**的**车次搜索和查询区域**中输入了正确的出发地、到达地、出发日期
                When 用户点击**查询**按钮
                Then 系统在100毫秒内在**车票查询页面**的**车次列表区域**显示符合用户选择的出发地、到达地、出发日期且是“GC-高铁/城际”，“D-动车”的所有车次信息列表

        4.3.9 用户成功查询但系统未响应
            Scenario: 用户输入了正确的出发地、到达地、出发日期但系统未响应
                Given 用户在**车票查询页面**的**车次搜索和查询区域**中输入了正确的出发地、到达地、出发日期
                When 用户点击**查询**按钮
                Then 系统未在100毫秒内显示符合用户选择的出发地、到达地、出发日期且是"GC-高铁/城际"，"D-动车"的所有车次信息列表
                And 查询按钮上方出现系统提示"查询失败，请稍后重试"，文字颜色#d32f2f（红色），字体大小13px，内边距8px 20px，背景#ffebee（浅红色），圆角4px，上边距10px
    
    4.4 **车票数据库**
        4.4.1 **车票数据库**需要存储数据包括：
            - “车次”，“出发站”，所有“途经车站”，“到达站”，相邻两站之间“历时”
            - 车厢节号与对应车厢内席位种类，车厢内每个座位的座位序号，每个座位在线路相邻两站之间是否处于**空闲**或**已被预定**状态
            - 所有需要加入**车票数据库**的车次信息存储在“车次信息.json”文档中
            
        4.4.2 余票数的计算
            4.4.2.1 对于某一车次路线上相邻两站，直接从**数据库**中检索相邻站点之间相应席位的处于**空闲**状态的数量，得到结果后直接返回
            4.4.2.2 对于某一车次路线上不相邻的两站，如果有一个座位从出发站到到达站之间都处于**空闲**状态，则余票数加一；遍历整个列车所有特定席位的车厢，返回得到对应席位的余票数
            4.4.2.3 对于某一车次路线上不相邻的两站，如果某一席位的的所有车厢的所有座位都在中途某两站之间的**已被预定**状态，则该车次席位余票数等于0
            4.4.2.4 **注意**：统计是否有余票时应该以座位为单位，只有一个座位从始至终都是**空闲**状态，余票数才加1。
        
        4.4.3 票价的计算：某两站之间某席位票价等于所有途经车站之间该席位票价之和
        
        4.4.4 数据库的更新与维护
            4.4.3.1 如果座位被用户**预定**成功，需要修改对应车次，对应车厢，对应座位号的相应站点之间**空闲**状态为**已被预定**状态
            4.4.3.2 数据库应支持新车次的加入与已有车次的删除
            4.4.3.4 数据库支持的“出发地“”到达地“分别为有数据库中车次途径或出发的车站/地区，数据库中有车次途径或到达的车站/地区


    4.5 用户筛选车次信息
        4.5.1 用户通过勾选复选框筛选车次
            Scenario: 用户在**车次信息筛选区域**选择某个车次类型
                Given：用户在**车票查询页面**，**车次列表区域**已显示
                When：用户在**车次类型**筛选栏中勾选某个车次类型复选框
                Then：**车次列表区域**的车次信息自动更新，仅显示符合该选项的车次，不检查相应车次是否有余票

            Scenario: 用户筛选某个出发站
                Given：用户在**车票查询页面**，**车次列表区域**已显示
                When：用户在**出发车站**筛选栏中勾选某个出发站复选框
                Then：**车次列表区域**的车次信息自动更新，仅显示从该出发站出发的车次

            Scenario: 用户筛选某个到达站
                Given：用户在**车票查询页面**，**车次列表区域**已显示
                When：用户在**到达车站**筛选栏中勾选某个到达站复选框
                Then：**车次列表区域**的车次信息自动更新，仅显示到达该到达站的车次

            Scenario: 用户筛选某个席别座位
                Given：用户在**车票查询页面**，**车次列表区域**已显示
                When：用户在某个筛选栏（如“车次席别”筛选栏）中勾选某个席别座位复选框
                Then：**车次列表区域**的车次信息自动更新，仅显示符合该选项的车次，不检查相应车次是否有余票
            
            Scenario：用户在同一筛选栏目勾选多个选项
                Given：用户在**车票查询页面**，**车次列表区域**已显示
                When：用户在某个筛选栏（如“车次类型”筛选栏）中勾选多于一个复选框
                Then：**车次列表区域**的车次信息自动更新，仅显示符合该筛选栏所勾选的选项的车次，不检查相应车次是否有余票（如用户勾选了“GC-高铁/城际”和“D-动车”，则仅显示“G”或“C”开头的车次或“D”字头的车次）

            Scenario: 用户在不同筛选栏目勾选多个选项
                Given：用户在**车票查询页面**，**车次列表区域**已显示
                When：用户在“车次类型”、“出发车站”、“到达车站”、“车次席别”筛选栏中勾选多于一个复选框（如勾选“GC-高铁/城际”、“D-动车”、“出发站A”、“到达站B”、“一等座”）
                Then：**车次列表区域**的车次信息自动更新，仅显示符合所勾选的“车次类型”、“出发车站”、“到达车站”、“车次席别”的车次，不检查相应车次是否有余票（如用户勾选了“GC-高铁/城际”、“D-动车”、“出发站A”、“到达站B”、“一等座”，则仅显示“G”或“C”开头的车次或“D”字头的车次，从“出发站A”出发到达“到达站B”，有“一等座”的车次）

            Scenario: 用户取消筛选条件
                Given：用户在**车次信息筛选区域** 已勾选“GC-高铁/城际”复选框，**车次列表区域**的车次信息已筛选
                When：用户再次点击并取消勾选“GC-高铁/城际”复选框
                Then：车次信息列表自动更新，移除“车次类型”的筛选限制，显示所有符合其他筛选条件的车次
            
            Scenario: 默认筛选栏初始化
                Given：用户在**车票查询页面**
                When：车次信息列表未显示
                Then：系统默认初始化“车次类型”筛选栏选项为“GC-高铁/城际”、“D-动车”
                And：“出发车站”、“到达车站”、“车次席别”筛选栏为空
            
            Scenario：自动补全筛选选项栏
                Given：用户在**车票查询页面**
                When：**车次列表区域**的车次信息已显示
                Then：系统自动补全“出发车站”的选项为**车次列表区域**所有已显示车次的出发站，“到达车站”的选项为所有**车次列表区域**已显示车次的到达站
                And 系统自动补全“车次席别”的选项为所有**车次列表区域**已显示车次的席别座位类型

        4.5.2 系统根据余票状态显示不同信息
            Scenario: 系统显示具体余票数量（少于20张）
                Given：用户在**车票查询页面**，某车次已显示在**车次列表区域**中
                When：系统从数据库中加载该车次的各种席位的余票信息
                And：该车次某种席位余票数量少于20张
                Then：该单元格直接显示剩余票数，字体大小13px，字体加粗（font-weight: 800），颜色#000000（黑色），内边距2px 0

            Scenario: 系统显示"有票"（余票充足）
                Given：用户在**车票查询页面**，某车次已显示在车次信息列表中
                When：系统加载该车次的各种席位的余票信息
                And：该车次某种席位余票数量大于等于20张
                Then：该单元格显示"有"，字体大小13px，字体加粗（font-weight: 600），颜色#52c41a（绿色），内边距2px 0

            Scenario: 系统显示"无票"（已售罄）
                Given：用户在**车票查询页面**，某车次已显示在车次信息列表中
                When：系统加载该车次的各种席位的余票信息
                And：该车次某种席位余票数量为0张
                Then：该单元格显示"无"，字体大小13px，字体加粗（font-weight: 500），颜色#999999（灰色），内边距2px 0

            Scenario：系统显示"--"（该车次无该席别票）
                Given：用户在**车票查询页面**，已根据筛选条件显示了部分车次
                When：系统加载这些车次的各种席位的信息
                And：某车次没有车次列表中对应席位类别（如"GZ-高铁/城际"车次没有"硬卧"席位）
                Then：该车次在**车次列表区域**对应单元格显示"--"，字体大小13px，字体加粗（font-weight: 500），颜色#999999（灰色），内边距2px 0

            Scenario：系统更新余票状态
                Given：用户在**车票查询页面**，某车次已显示在**车次列表区域**中，且已加载该车次的各种席位的余票信息
                When：用户刷新界面
                Then：系统根据最新的余票信息，更新**车次列表区域**中对应单元格的显示内容
            
            Scenario：用户超过五分钟未刷新界面
                Given：用户在**车票查询页面**，某车次已显示在**车次列表区域**中，且已加载该车次的各种席位的余票信息
                When：用户未刷新界面，超过五分钟
                Then：系统出现弹窗提示：页面内容已过期，请重新查询！
    
    4.4 用户点击预定按钮
        4.4.1 用户在网络异常状态下尝试预定
            Scenario：用户网络异常下点击”预订“
                Given：用户在**车票查询页面**
                And：**车次列表区域**已显示
                And：用户网络异常
                When：用户点击某个可以预定的车次的”预定“按钮
                Then：系统弹出提示：网络忙，请稍后重试
                And：弹窗包含“确认”按钮，点击可以关闭弹窗并退回**车票查询页面**
        
        4.4.1 用户未登录状态下点击“预订”
            Scenario: 用户未登录时点击“预订”按钮
                Given：用户未登录
                And：用户在**车票查询页面**
                And：用户网络正常
                When：用户点击任一车次后的“预订”按钮
                Then：页面中出现弹窗提示：“请先登录！”，弹窗包含“确认”按钮允许用户点击并跳转至登录页面，若用户点击“取消”按钮，则弹窗关闭，用户继续在**车票查询页面**操作

        4.4.2 用户已登录状态下点击“预订”
            Scenario：某车次车票已售罄
                Given：用户在**车票查询页面**
                And：车次列表已显示
                When：某车次所有席别状态均显示为“无”
                Then：“预定”按钮显示为灰色，用户无法点击该按钮
            
            Scenario: 用户点击“预订”时车票恰好售罄（发生并发冲突）
                Given：用户已登录
                And：用户在**车票查询页面**
                And：用户所选车次的“预订”按钮处于可点击状态
                And：用户网络正常
                When：用户点击该车次后的“预订”按钮，但服务器端校验发现所有席别均已售罄
                Then：系统弹出提示“手慢了，该车次车票已售罄！”
                And：弹窗包含“确认”按钮允许用户点击并返回**车票查询页面**
                And：页面停留在**车票查询页面**，并刷新当前车次列表

            Scenario：用户点击“预订”时距离发车时间不足3小时
                Given：用户已登录
                And：用户在**车票查询页面**
                And：用户所选车次距离发车时间不足3小时
                And：用户网络正常
                When：用户点击该车次后的“预订”按钮
                Then：页面中央出现弹窗提示“您选择的列车距开车时间很近了，进站约需20分钟，请确保有足够的时间办理安全检查、实名制验证及检票等手续，以免耽误您的旅行。”
                And：提示弹窗包含“确认”和“取消”按钮，点击“确认”按钮关闭弹窗并在100ms之内加载购票页面，点击“取消”按钮关闭弹窗，用户继续在**车票查询页面**操作

            Scenario：用户点击有余票车次的“预订”按钮
                Given：用户已登录
                And：用户在**车票查询页面**
                And：用户所选车次有余票（席别状态显示为具体数字或“有”）
                And：用户网络正常
                When：用户点击该车次后的“预订”按钮
                Then：页面在100ms之内跳转到该车次的**购票页面**
            
            Scenario：用户点击“预定”按钮时，距离车次列表上次刷新时间超过5分钟
                Given：用户已登录
                And：用户在**车票查询页面**
                And：当前时间距离车次列表上次刷新时间超过5分钟
                When：用户点击某可以被预定的车次后的“预订”按钮
                Then：页面中央出现弹窗提示“页面内容已过期，请重新查询！”
                And：提示弹窗包含“确认”和“取消”按钮，点击“确认”按钮重新加载并刷新当前车次列表，点击“取消”按钮关闭弹窗，车次列表保持不变并且刷新时间仍然为上次的刷新时间