
# 前端UI接口定义
# 基于登录页、注册页、首页查询页和车次列表页需求文档生成

- type: Frontend
  id: UI-LoginPage
  description: 登录主页面组件，包含完整的登录界面布局
  properties:
    - name: onLoginSuccess
      type: function
      description: "登录成功后的回调函数"
    - name: onNavigateToRegister
      type: function
      description: "跳转到注册页面的回调函数"
    - name: onNavigateToForgotPassword
      type: function
      description: "跳转到忘记密码页面的回调函数"
  state:
    - identifier  # 用户名/邮箱/手机号
    - password
    - error
    - isLoading
    - showSmsModal
  dependencies:
    - API-POST-Login
    - UI-TopNavigation
    - UI-LoginForm
    - UI-BottomNavigation
    - UI-SmsVerificationModal
  acceptanceCriteria:
    - 整体页面背景为白色，分为上中下三部分布局
    - 集成顶部导航、登录表单和底部导航组件
    - 处理登录状态管理和错误显示
    - 支持短信验证弹窗的显示和隐藏
  changeLog:
    - date: "2025-01-25"
      description: "初始创建，登录页面主容器组件。"

- type: Frontend
  id: UI-TopNavigation
  description: 顶部导航区域组件
  properties:
    - name: onLogoClick
      type: function
      description: "Logo点击事件处理函数"
  state:
    - none
  dependencies:
    - API-GET-HomePage
  acceptanceCriteria:
    - 左侧显示Logo区域，使用图片"登录页-顶部导航区域-Logo区域.png"
    - Logo包含中国铁路12306官方标识和文字
    - Logo右侧显示"欢迎登录12306"文字（黑色）
    - Logo点击可跳转到12306首页
  changeLog:
    - date: "2025-01-25"
      description: "初始创建，顶部导航组件。"
    - date: "2025-11-12"
      description: "复用于首页和车次列表页，支持根据登录状态显示不同的导航选项。"

- type: Frontend
  id: UI-LoginForm
  description: 登录表单组件
  properties:
    - name: onSubmit
      type: function
      description: "表单提交处理函数"
    - name: onRegisterClick
      type: function
      description: "注册链接点击处理函数"
    - name: onForgotPasswordClick
      type: function
      description: "忘记密码链接点击处理函数"
    - name: identifier
      type: string
      description: "用户名/邮箱/手机号输入值"
    - name: password
      type: string
      description: "密码输入值"
    - name: error
      type: string
      description: "错误信息"
    - name: isLoading
      type: boolean
      description: "加载状态"
  state:
    - localIdentifier
    - localPassword
    - validationErrors
  dependencies:
    - API-POST-Login
  acceptanceCriteria:
    - 背景使用推广图片"登录页-登录表单区域-推广背景.png"
    - 表单位于页面中间偏右位置
    - 包含"账号登录"标题（蓝色）
    - "用户名/邮箱/手机号"输入框（灰色边框，黑色文字）
    - "密码"输入框（灰色边框，密码显示为黑色圆点）
    - "立即登录"按钮（橙色背景，白色文字）
    - "注册12306账户"链接（蓝色文字）
    - "忘记密码？"链接（灰色文字）
    - 支持各种输入验证和错误提示
  changeLog:
    - date: "2025-01-25"
      description: "初始创建，登录表单组件。"

- type: Frontend
  id: UI-BottomNavigation
  description: 底部导航区域组件
  properties:
    - name: onFriendLinkClick
      type: function
      description: "友情链接点击处理函数"
  state:
    - none
  dependencies:
    - none
  acceptanceCriteria:
    - 左侧显示友情链接区域
    - 右侧显示四个官方平台二维码
    - 使用指定的二维码图片：
      - "中国铁路官方微信二维码.png"
      - "中国铁路官方微博二维码.png"
      - "12306公众号二维码.png"
      - "铁路12306二维码.png"
  changeLog:
    - date: "2025-01-25"
      description: "初始创建，底部导航组件。"
    - date: "2025-11-12"
      description: "复用于所有页面的底部导航。"

- type: Frontend
  id: UI-SmsVerificationModal
  description: 短信验证弹窗组件
  properties:
    - name: isVisible
      type: boolean
      description: "弹窗显示状态"
    - name: onClose
      type: function
      description: "关闭弹窗处理函数"
    - name: onVerificationSuccess
      type: function
      description: "验证成功回调函数"
    - name: sessionId
      type: string
      description: "登录会话ID"
  state:
    - idCardLast4  # 证件号后4位
    - verificationCode  # 验证码
    - error  # 错误信息
    - message  # 成功/提示信息
    - messageType  # 消息类型：success, error, warning
    - isLoading  # 加载状态
    - buttonState  # 获取验证码按钮状态：1-禁用（证件号<4位），2-可点击（证件号=4位），3-倒计时（60秒）
    - countdown  # 倒计时秒数
    - isSending  # 是否正在发送验证码
  dependencies:
    - API-POST-SendVerificationCode
    - API-POST-VerifyLogin
  acceptanceCriteria:
    - 弹窗位于页面正中央，大小为登录页面的30%
    - 顶部导航栏为浅灰色，包含"选择验证方式"文字和"x"关闭按钮
    - 内容区包含：
      - "短信验证"标题（蓝色，居中）
      - "请输入登录账号绑定的证件号后4位"输入框（最多4位）
      - "输入验证码"输入框（最多6位）和"获取验证码"按钮
      - "确定"按钮（橙色背景，白色文字）
    - "获取验证码"按钮三种状态：
      - 状态1：背景灰色，文字灰色"获取验证码"，禁用（证件号<4位）
      - 状态2：背景白色，文字黑色"获取验证码"，可点击（证件号=4位）
      - 状态3：背景灰色，文字灰色"重新发送(XXs)"，禁用（60秒倒计时）
    - 客户端验证：
      - 证件号后4位为空时显示："请输入登录账号绑定的证件号后4位"
      - 验证码为空时显示："请输入验证码"
      - 验证码少于6位时显示："请输入正确的验证码"
    - 成功/错误消息显示在"确定"按钮上方
    - 支持点击获取验证码后自动启动60秒倒计时
  changeLog:
    - date: "2025-01-25"
      description: "初始创建，短信验证弹窗组件。"

- type: Frontend
  id: UI-ErrorMessage
  description: 错误信息显示组件
  properties:
    - name: message
      type: string
      description: "错误信息内容"
    - name: type
      type: string
      description: "错误类型（error, warning, info）"
    - name: onDismiss
      type: function
      description: "关闭错误信息处理函数"
  state:
    - isVisible
    - autoHideTimer
  dependencies:
    - none
  acceptanceCriteria:
    - 在相应位置显示错误信息
    - 支持不同类型的消息样式
    - 支持自动隐藏和手动关闭
    - 在登录表单中显示在"立即登录"按钮上方
    - 在短信验证弹窗中显示在"确定"按钮上方
  changeLog:
    - date: "2025-01-25"
      description: "初始创建，错误信息显示组件。"

- type: Frontend
  id: UI-LoadingSpinner
  description: 加载状态指示器组件
  properties:
    - name: isVisible
      type: boolean
      description: "是否显示加载状态"
    - name: size
      type: string
      description: "加载器大小（small, medium, large）"
  state:
    - none
  dependencies:
    - none
  acceptanceCriteria:
    - 在API请求期间显示加载状态
    - 支持不同大小的加载器
    - 在加载期间禁用相关按钮和输入框
  changeLog:
    - date: "2025-01-25"
      description: "初始创建，加载状态指示器组件。"

- type: Frontend
  id: UI-RegisterPage
  description: 注册主页面组件，包含完整的用户注册界面
  properties:
    - name: onRegistrationSuccess
      type: function
      description: "注册成功后的回调函数"
    - name: onNavigateToLogin
      type: function
      description: "跳转到登录页面的回调函数"
  state:
    - currentStep  # 当前步骤：1-填写信息，2-验证
    - registrationData
    - error
    - isLoading
    - sessionId
  dependencies:
    - API-POST-Register
    - UI-TopNavigation
    - UI-RegisterForm
    - UI-RegistrationVerification
    - UI-BottomNavigation
  acceptanceCriteria:
    - 整体页面背景为白色，分为上中下三部分布局
    - 支持两步注册流程：信息填写和验证
    - 集成顶部导航、注册表单和底部导航组件
    - 处理注册状态管理和步骤切换
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，注册页面主容器组件。"

- type: Frontend
  id: UI-RegisterForm
  description: 用户注册表单组件
  properties:
    - name: onSubmit
      type: function
      description: "表单提交处理函数"
    - name: onNavigateToLogin
      type: function
      description: "跳转到登录页面的回调函数"
  state:
    - username
    - usernameValidation  # { isValid, message, showCheckmark }
    - password
    - passwordValidation
    - confirmPassword
    - confirmPasswordValidation
    - idCardType
    - name
    - nameValidation
    - idCardNumber
    - idCardNumberValidation
    - discountType
    - email
    - emailValidation
    - phone
    - phoneValidation
    - agreedToTerms
    - errors
    - isLoading
  dependencies:
    - API-POST-ValidateUsername
    - API-POST-ValidatePassword
    - API-POST-ValidateName
    - API-POST-ValidateIdCard
    - API-POST-ValidateEmail
    - API-POST-ValidatePhone
    - API-POST-Register
    - API-GET-ServiceTerms
    - API-GET-PrivacyPolicy
  acceptanceCriteria:
    - 显示所有必填字段，带"*"号标识
    - 用户名输入框支持实时验证，显示绿色勾勾表示合法
    - 密码输入框支持实时验证和格式检查
    - 确认密码输入框验证与密码一致性
    - 证件类型下拉选择框，支持8种证件类型
    - 姓名输入框支持中英文及特殊字符验证
    - 证件号码输入框支持18位验证
    - 优惠类型下拉选择框，支持4种优惠类型
    - 邮箱输入框为可选字段，支持格式验证
    - 手机号码输入框限制11位，只允许数字
    - 用户协议勾选框，支持超链接跳转
    - "下一步"按钮，点击后进行完整性验证
    - 实时显示各种验证错误信息
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，用户注册表单组件。"

- type: Frontend
  id: UI-SelectDropdown
  description: 下拉选择框组件（用于证件类型和优惠类型选择）
  properties:
    - name: options
      type: array
      description: "选项列表"
    - name: value
      type: string
      description: "当前选中的值"
    - name: placeholder
      type: string
      description: "占位符文本"
    - name: onChange
      type: function
      description: "值变化时的回调函数"
    - name: disabled
      type: boolean
      description: "是否禁用"
  state:
    - isExpanded  # 是否展开选项
    - selectedValue
  dependencies:
    - none
  acceptanceCriteria:
    - 显示当前选中的值或占位符
    - 右侧显示向下箭头图标
    - 点击箭头或选择框展开/收起选项列表
    - 选择某个选项后自动收起并更新显示值
    - 支持键盘导航（可选功能）
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，下拉选择框组件。"

- type: Frontend
  id: UI-ValidationInput
  description: 带验证功能的输入框组件
  properties:
    - name: value
      type: string
      description: "输入值"
    - name: onChange
      type: function
      description: "值变化时的回调函数"
    - name: onValidate
      type: function
      description: "验证函数"
    - name: placeholder
      type: string
      description: "占位符文本"
    - name: type
      type: string
      description: "输入类型（text, password, email等）"
    - name: maxLength
      type: number
      description: "最大长度限制"
    - name: required
      type: boolean
      description: "是否必填"
    - name: showCheckmark
      type: boolean
      description: "是否显示绿色勾勾"
    - name: errorMessage
      type: string
      description: "错误信息"
  state:
    - localValue
    - isValidating
    - validationResult
  dependencies:
    - none
  acceptanceCriteria:
    - 支持实时输入和验证
    - 必填字段左侧显示"*"号
    - 验证通过时右侧显示绿色勾勾
    - 验证失败时显示错误信息
    - 支持不同类型的输入（文本、密码、邮箱等）
    - 支持最大长度限制
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，带验证功能的输入框组件。"

- type: Frontend
  id: UI-RegistrationVerificationModal
  description: 注册验证弹窗组件
  properties:
    - name: isVisible
      type: boolean
      description: "弹窗显示状态"
    - name: sessionId
      type: string
      description: "注册会话ID"
    - name: phone
      type: string
      description: "手机号码"
    - name: onVerificationSuccess
      type: function
      description: "验证成功回调函数"
    - name: onCancel
      type: function
      description: "返回修改回调函数"
  state:
    - verificationCode
    - error
    - isLoading
  dependencies:
    - API-POST-SendRegistrationVerificationCode
    - API-POST-CompleteRegistration
    - UI-SuccessModal
  acceptanceCriteria:
    - 弹窗标题为"手机验证"
    - 显示"验证码已发送至【手机号】"文字
    - 包含验证码输入框（6位数字）
    - "完成注册"按钮（橙色背景，白色文字）
    - "返回修改"按钮
    - 自动发送验证码到手机
    - 点击"完成注册"按钮后验证验证码
    - 验证成功后显示成功提示并跳转登录页
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，注册验证弹窗组件。"

- type: Frontend
  id: UI-SuccessModal
  description: 成功提示弹窗组件
  properties:
    - name: isVisible
      type: boolean
      description: "弹窗显示状态"
    - name: message
      type: string
      description: "成功消息内容"
    - name: onConfirm
      type: function
      description: "确认按钮点击处理函数"
  state:
    - none
  dependencies:
    - none
  acceptanceCriteria:
    - 弹窗占据页面30%
    - 居中显示
    - 显示成功消息
    - 包含"确认"按钮
    - 点击"确认"按钮关闭弹窗并执行回调
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，成功提示弹窗组件。"

- type: Frontend
  id: UI-ServiceTermsPage
  description: 服务条款页面组件
  properties:
    - name: onNavigateToHome
      type: function
      description: "跳转到首页的回调函数"
  state:
    - termsContent
    - isLoading
  dependencies:
    - API-GET-ServiceTerms
    - UI-TopNavigation
    - UI-BottomNavigation
  acceptanceCriteria:
    - 页面标题为"服务条款"
    - 服务条款内容以文本形式展示
    - 页面顶部导航栏与快捷页面入口均与首页一致
    - 页面风格与首页一致
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，服务条款页面组件。"

- type: Frontend
  id: UI-PrivacyPolicyPage
  description: 隐私权政策页面组件
  properties:
    - name: onNavigateToHome
      type: function
      description: "跳转到首页的回调函数"
  state:
    - policyContent
    - isLoading
  dependencies:
    - API-GET-PrivacyPolicy
    - UI-TopNavigation
    - UI-BottomNavigation
  acceptanceCriteria:
    - 中文标题"隐私权政策"居中显示
    - 英文标题"NOTICE"居中显示
    - 隐私权政策内容以文本形式展示
    - 页面顶部导航栏与快捷页面入口均与首页一致
    - 页面风格与首页一致
  changeLog:
    - date: "2025-11-10"
      description: "初始创建，隐私权政策页面组件。"

# === 首页查询页相关UI组件 ===

- type: Frontend
  id: UI-HomePage
  description: 首页/查询页主容器组件
  properties:
    - name: onNavigateToLogin
      type: function
      description: "跳转到登录页的回调函数"
    - name: onNavigateToRegister
      type: function
      description: "跳转到注册页的回调函数"
    - name: onNavigateToPersonalCenter
      type: function
      description: "跳转到个人中心的回调函数"
    - name: onNavigateToTrainList
      type: function
      description: "跳转到车次列表页的回调函数"
  state:
    - isLoggedIn
    - userInfo
    - error
  dependencies:
    - API-GET-HomePage
    - UI-TopNavigation
    - UI-MainNavigation
    - UI-TrainSearchForm
    - UI-BottomNavigation
  acceptanceCriteria:
    - 整体页面背景为白色，分为上中下三部分布局
    - 最上方为顶部导航区域
    - 中间为车票查询表单区域
    - 最下方为底部导航区域
    - 根据登录状态显示不同的导航选项
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，首页/查询页主容器组件。"

- type: Frontend
  id: UI-MainNavigation
  description: 主导航栏组件（包含登录/注册/个人中心入口）
  properties:
    - name: isLoggedIn
      type: boolean
      description: "用户登录状态"
    - name: onLoginClick
      type: function
      description: "登录按钮点击处理函数"
    - name: onRegisterClick
      type: function
      description: "注册按钮点击处理函数"
    - name: onPersonalCenterClick
      type: function
      description: "个人中心按钮点击处理函数"
  state:
    - none
  dependencies:
    - none
  acceptanceCriteria:
    - 如果用户未登录，显示"登录"和"注册"入口
    - 如果用户已登录，仅显示"个人中心"入口，不显示"登录"和"注册"
    - 点击"登录"跳转到登录页，在100毫秒内完成
    - 点击"注册"跳转到注册页，在100毫秒内完成
    - 点击"个人中心"跳转到个人中心页，在100毫秒内完成
    - 如果用户未登录点击"个人中心"，跳转到登录页
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，主导航栏组件。"

- type: Frontend
  id: UI-TrainSearchForm
  description: 车票查询表单组件
  properties:
    - name: onSearch
      type: function
      description: "查询按钮点击处理函数"
    - name: onNavigateToTrainList
      type: function
      description: "跳转到车次列表页的回调函数"
  state:
    - departureStation
    - arrivalStation
    - departureDate
    - isHighSpeed  # 是否勾选高铁/动车
    - errors
    - isLoading
    - stationSuggestions  # 站点推荐列表
  dependencies:
    - API-GET-Stations
    - API-POST-ValidateStation
    - API-POST-SearchTrains
    - UI-StationInput
    - UI-DatePicker
  acceptanceCriteria:
    - 背景使用12306官方APP推广图片
    - 表单镶嵌于推广背景左侧，位于主页面中间偏左位置
    - 从上至下依次包含：
      - 出发地输入框
      - 到达地输入框
      - 出发地和到达地之间有橙色双箭头按钮（交换功能）
      - 出发日期输入框
      - "高铁/动车"勾选框
      - "查询"按钮（橙色背景，白色文字）
    - 点击双箭头按钮交换出发地和到达地
    - 出发日期默认自动填入当前日期
    - 查询前验证出发地和到达地不为空
    - 查询前验证出发地和到达地在系统支持的城市列表中
    - 成功查询后在100毫秒内跳转到车次列表页
    - 查询失败时显示错误提示并保持在当前页面
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，车票查询表单组件。"

- type: Frontend
  id: UI-StationInput
  description: 站点输入组件（支持自动推荐）
  properties:
    - name: value
      type: string
      description: "当前输入值"
    - name: placeholder
      type: string
      description: "占位符文本"
    - name: onChange
      type: function
      description: "值变化时的回调函数"
    - name: onSelect
      type: function
      description: "选择站点时的回调函数"
    - name: type
      type: string
      description: "输入框类型（departure/arrival）"
  state:
    - inputValue
    - suggestions  # 推荐站点列表
    - showSuggestions  # 是否显示推荐列表
    - isLoading
    - error
  dependencies:
    - API-GET-Stations
    - API-POST-ValidateStation
  acceptanceCriteria:
    - 点击输入框时显示所有站点列表
    - 用户输入时实时搜索并显示匹配的站点
    - 支持简拼、全拼、汉字搜索
    - 如果输入的站点不在系统支持列表中，显示"无法匹配该出发地/到达地"
    - 显示相似度匹配的推荐站点
    - 用户可点击推荐站点填充到输入框
    - 输入框为空时显示"请选择出发地/到达地"提示
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，站点输入组件。"

- type: Frontend
  id: UI-DatePicker
  description: 日期选择器组件
  properties:
    - name: value
      type: string
      description: "当前选中的日期"
    - name: onChange
      type: function
      description: "日期变化时的回调函数"
    - name: minDate
      type: string
      description: "最小可选日期"
    - name: maxDate
      type: string
      description: "最大可选日期"
  state:
    - selectedDate
    - showCalendar  # 是否显示日历
    - availableDates  # 已放票的日期列表
  dependencies:
    - API-GET-AvailableDates
  acceptanceCriteria:
    - 默认显示当前日期
    - 点击输入框展开日历选择器
    - 已放票的日期显示为黑色，可点击选择
    - 已过期或未开票的日期显示为灰色，不可点击
    - 选择日期后自动收起日历并更新输入框显示
    - 如果点击不可选日期，页面保持不变
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，日期选择器组件。"

# === 车次列表页相关UI组件 ===

- type: Frontend
  id: UI-TrainListPage
  description: 车次列表页主容器组件
  properties:
    - name: onNavigateToHome
      type: function
      description: "跳转到首页的回调函数"
    - name: onNavigateToLogin
      type: function
      description: "跳转到登录页的回调函数"
    - name: onNavigateToOrderPage
      type: function
      description: "跳转到订单页的回调函数"
  state:
    - searchParams  # 查询参数
    - trains  # 车次列表
    - filteredTrains  # 筛选后的车次列表
    - filterOptions  # 筛选选项
    - isLoading
    - error
    - queryTimestamp  # 查询时间戳
    - isLoggedIn
  dependencies:
    - API-POST-SearchTrains
    - API-GET-FilterOptions
    - UI-TopNavigation
    - UI-MainNavigation
    - UI-TrainSearchBar
    - UI-TrainFilterPanel
    - UI-TrainList
    - UI-BottomNavigation
  acceptanceCriteria:
    - 整体页面背景为白色，从上到下分为5个部分：
      - 页面顶部导航区域
      - 车次搜索和查询区域
      - 车次信息筛选区域
      - 车次列表区域
      - 底部导航区域
    - 页面加载时自动根据查询参数获取车次列表
    - 支持车次筛选功能
    - 记录查询时间戳，超过5分钟提示用户重新查询
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，车次列表页主容器组件。"

- type: Frontend
  id: UI-TrainSearchBar
  description: 车次搜索和查询区域组件
  properties:
    - name: initialDepartureStation
      type: string
      description: "初始出发站"
    - name: initialArrivalStation
      type: string
      description: "初始到达站"
    - name: initialDepartureDate
      type: string
      description: "初始出发日期"
    - name: onSearch
      type: function
      description: "查询按钮点击处理函数"
  state:
    - departureStation
    - arrivalStation
    - departureDate
    - errors
    - isLoading
  dependencies:
    - API-POST-SearchTrains
    - UI-StationInput
    - UI-DatePicker
  acceptanceCriteria:
    - 包含出发地输入框、到达地输入框、出发日期选择框
    - 包含"查询"按钮
    - 自动填充从首页传递的查询参数
    - 出发地和到达地未填写时显示默认状态"简拼/全拼/汉字"
    - 出发日期未填写时默认填入当前日期
    - 查询前验证出发地和到达地不为空
    - 查询成功后在100毫秒内更新车次列表
    - 查询失败时显示"查询失败，请稍后重试"
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，车次搜索和查询区域组件。"

- type: Frontend
  id: UI-TrainFilterPanel
  description: 车次信息筛选区域组件
  properties:
    - name: onFilterChange
      type: function
      description: "筛选条件变化时的回调函数"
    - name: departureStations
      type: array
      description: "出发站列表"
    - name: arrivalStations
      type: array
      description: "到达站列表"
    - name: seatTypes
      type: array
      description: "席别类型列表"
  state:
    - selectedTrainTypes  # 已选车次类型
    - selectedDepartureStations  # 已选出发站
    - selectedArrivalStations  # 已选到达站
    - selectedSeatTypes  # 已选席别
  dependencies:
    - none
  acceptanceCriteria:
    - 显示在车次搜索和查询区域下方
    - 包含以下筛选栏：
      - 车次类型：GC-高铁/城际、D-动车
      - 出发车站：根据查询结果自动补全
      - 到达车站：根据查询结果自动补全
      - 车次席别：商务座、一等座、二等座、软卧、硬卧
    - 默认初始化车次类型为"GC-高铁/城际"和"D-动车"
    - 其他筛选栏初始为空
    - 用户勾选或取消勾选筛选条件时，实时更新车次列表
    - 支持同一筛选栏多选（满足任一条件）
    - 支持跨筛选栏多选（同时满足所有条件）
    - 筛选时不检查余票状态
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，车次信息筛选区域组件。"

- type: Frontend
  id: UI-TrainList
  description: 车次列表组件
  properties:
    - name: trains
      type: array
      description: "车次列表数据"
    - name: onReserve
      type: function
      description: "预订按钮点击处理函数"
    - name: isLoggedIn
      type: boolean
      description: "用户登录状态"
  state:
    - none
  dependencies:
    - UI-TrainItem
  acceptanceCriteria:
    - 显示在车次信息筛选区域下方
    - 以表格形式展示车次列表
    - 表格列包含：车次、出发站/到达站、出发时间、到达时间、历时、商务座、一等座、二等座、软卧、硬卧、预订按钮
    - 如果没有符合条件的车次，显示"暂无符合条件的车次"
    - 每个车次项最右侧有"预订"按钮
    - 不包含换乘车次，仅展示直达车次
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，车次列表组件。"

- type: Frontend
  id: UI-TrainItem
  description: 车次列表项组件
  properties:
    - name: train
      type: object
      description: "车次数据"
    - name: onReserve
      type: function
      description: "预订按钮点击处理函数"
    - name: isLoggedIn
      type: boolean
      description: "用户登录状态"
  state:
    - availableSeats  # 余票信息
  dependencies:
    - API-POST-CalculateAvailableSeats
    - UI-ReserveButton
  acceptanceCriteria:
    - 显示车次基本信息：车次号、出发站、到达站、出发时间、到达时间、历时
    - 显示各席别余票状态：
      - 余票数<20：显示具体数字，黑色字体
      - 余票数>=20：显示"有"，绿色字体
      - 余票数=0：显示"无"，灰色字体
      - 该车次无该席别：显示"--"
    - 最右侧显示"预订"按钮
    - 如果所有席别都售罄，"预订"按钮显示为灰色且不可点击
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，车次列表项组件。"

- type: Frontend
  id: UI-ReserveButton
  description: 预订按钮组件
  properties:
    - name: trainNo
      type: string
      description: "车次号"
    - name: departureStation
      type: string
      description: "出发站"
    - name: arrivalStation
      type: string
      description: "到达站"
    - name: departureDate
      type: string
      description: "出发日期"
    - name: departureTime
      type: string
      description: "出发时间"
    - name: hasSoldOut
      type: boolean
      description: "是否已售罄"
    - name: isLoggedIn
      type: boolean
      description: "用户登录状态"
    - name: onReserve
      type: function
      description: "预订成功回调函数"
    - name: queryTimestamp
      type: string
      description: "查询时间戳"
  state:
    - isLoading
    - showConfirmModal  # 是否显示确认弹窗
    - showExpiredModal  # 是否显示过期弹窗
  dependencies:
    - API-POST-ReserveTicket
  acceptanceCriteria:
    - 如果所有席别售罄，按钮显示为灰色且不可点击
    - 如果用户未登录，点击后弹窗提示"请先登录！"，包含"确认"和"取消"按钮
    - 点击"确认"跳转到登录页，点击"取消"关闭弹窗
    - 如果距离发车时间不足3小时，弹窗提示安全检查提醒，包含"确认"和"取消"按钮
    - 点击"确认"在100毫秒内跳转到购票页面，点击"取消"关闭弹窗
    - 如果距离查询时间超过5分钟，弹窗提示"页面内容已过期，请重新查询！"
    - 如果网络异常，弹窗提示"网络忙，请稍后重试"
    - 如果点击时车票恰好售罄，弹窗提示"手慢了，该车次车票已售罄！"并刷新车次列表
    - 正常情况下在100毫秒内跳转到购票页面
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，预订按钮组件。"

- type: Frontend
  id: UI-ConfirmModal
  description: 确认弹窗组件（用于各种确认场景）
  properties:
    - name: isVisible
      type: boolean
      description: "弹窗显示状态"
    - name: title
      type: string
      description: "弹窗标题"
    - name: message
      type: string
      description: "提示消息"
    - name: confirmText
      type: string
      description: "确认按钮文本"
    - name: cancelText
      type: string
      description: "取消按钮文本"
    - name: onConfirm
      type: function
      description: "确认按钮点击处理函数"
    - name: onCancel
      type: function
      description: "取消按钮点击处理函数"
  state:
    - none
  dependencies:
    - none
  acceptanceCriteria:
    - 弹窗居中显示
    - 包含标题、消息内容、确认和取消按钮
    - 点击确认按钮执行确认操作
    - 点击取消按钮关闭弹窗
    - 支持点击遮罩层关闭弹窗
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，确认弹窗组件。"

- type: Frontend
  id: UI-ExpiredQueryModal
  description: 查询过期提示弹窗组件
  properties:
    - name: isVisible
      type: boolean
      description: "弹窗显示状态"
    - name: onRefresh
      type: function
      description: "刷新按钮点击处理函数"
    - name: onCancel
      type: function
      description: "取消按钮点击处理函数"
  state:
    - none
  dependencies:
    - none
  acceptanceCriteria:
    - 当距离上次查询超过5分钟时自动显示
    - 提示"页面内容已过期，请重新查询！"
    - 包含"确认"和"取消"按钮
    - 点击"确认"重新加载并刷新当前车次列表
    - 点击"取消"关闭弹窗，车次列表保持不变
  changeLog:
    - date: "2025-11-12"
      description: "初始创建，查询过期提示弹窗组件。"
